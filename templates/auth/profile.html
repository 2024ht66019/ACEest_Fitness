{% extends "base.html" %}

{% block title %}Profile - ACEest Fitness{% endblock %}

{% block content %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <h1 class="display-5 fw-bold mb-4">
                <i class="fas fa-user"></i> My Profile
            </h1>

            <div class="card shadow">
                <div class="card-body p-4">
                    <form method="POST" action="{{ url_for('auth.profile') }}">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="full_name" class="form-label">Full Name</label>
                                <input type="text" class="form-control" id="full_name" name="full_name" 
                                       value="{{ user.full_name or '' }}">
                            </div>

                            <div class="col-md-6 mb-3">
                                <label for="registration_id" class="form-label">Registration ID</label>
                                <input type="text" class="form-control" id="registration_id" name="registration_id" 
                                       value="{{ user.registration_id or '' }}">
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="age" class="form-label">Age</label>
                                <input type="number" class="form-control" id="age" name="age" 
                                       value="{{ user.age or '' }}" min="1" max="150">
                            </div>

                            <div class="col-md-4 mb-3">
                                <label for="gender" class="form-label">Gender</label>
                                <select class="form-select" id="gender" name="gender">
                                    <option value="">Select...</option>
                                    <option value="M" {% if user.gender == 'M' %}selected{% endif %}>Male</option>
                                    <option value="F" {% if user.gender == 'F' %}selected{% endif %}>Female</option>
                                    <option value="Other" {% if user.gender == 'Other' %}selected{% endif %}>Other</option>
                                </select>
                            </div>

                            <div class="col-md-4 mb-3">
                                <label for="height_cm" class="form-label">Height (cm)</label>
                                <input type="number" class="form-control" id="height_cm" name="height_cm" 
                                       value="{{ user.height_cm or '' }}" step="0.1" min="1">
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="weight_kg" class="form-label">Weight (kg)</label>
                                <input type="number" class="form-control" id="weight_kg" name="weight_kg" 
                                       value="{{ user.weight_kg or '' }}" step="0.1" min="1">
                            </div>
                        </div>

                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="fas fa-save"></i> Update Profile
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Health Metrics -->
            {% if user.height_cm and user.weight_kg and user.age and user.gender %}
            <div class="card shadow mt-4">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0"><i class="fas fa-heartbeat"></i> Your Health Metrics</h5>
                </div>
                <div class="card-body">
                    <div class="row text-center">
                        <div class="col-md-4 mb-3">
                            <div class="metric-card p-3 bg-light rounded">
                                <h3 class="text-primary">{{ user.bmi }}</h3>
                                <p class="mb-0"><strong>BMI</strong></p>
                                <small class="text-muted">{{ user.bmi_category }}</small>
                            </div>
                        </div>

                        <div class="col-md-4 mb-3">
                            <div class="metric-card p-3 bg-light rounded">
                                <h3 class="text-success">{{ user.bmr|int }}</h3>
                                <p class="mb-0"><strong>BMR</strong></p>
                                <small class="text-muted">kcal/day</small>
                            </div>
                        </div>

                        <div class="col-md-4 mb-3">
                            <div class="metric-card p-3 bg-light rounded">
                                <h3 class="text-info">{{ user.tdee|int }}</h3>
                                <p class="mb-0"><strong>TDEE</strong></p>
                                <small class="text-muted">kcal/day</small>
                            </div>
                        </div>
                    </div>

                    <div class="alert alert-info mt-3">
                        <strong>Understanding Your Metrics:</strong>
                        <ul class="mb-0 mt-2">
                            <li><strong>BMI</strong> (Body Mass Index): Measures body fat based on height and weight</li>
                            <li><strong>BMR</strong> (Basal Metabolic Rate): Calories burned at rest</li>
                            <li><strong>TDEE</strong> (Total Daily Energy Expenditure): Total calories burned daily with activity</li>
                        </ul>
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
